--- a/src/bin/e_start_main.c
+++ b/src/bin/e_start_main.c
@@ -547,7 +547,7 @@
                             int back;
 
                             memset(&sig, 0, sizeof(siginfo_t));
-#ifdef HAVE_SYS_PTRACE_H
+#if defined(HAVE_SYS_PTRACE_H) && defined(PT_GETSIGINFO)
                             if (!really_know)
                               r = ptrace(PT_GETSIGINFO, child, NULL, &sig);
 #endif
