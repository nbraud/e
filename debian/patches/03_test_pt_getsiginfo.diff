diff --git a/src/bin/e_start_main.c b/src/bin/e_start_main.c
index 7ce1415..f8fe6a0 100644
--- a/src/bin/e_start_main.c
+++ b/src/bin/e_start_main.c
@@ -473,7 +473,7 @@ main(int argc, char **argv)
                             int r = 0;
                             int back;
 
-#ifdef HAVE_SYS_PTRACE_H
+#if defined(HAVE_SYS_PTRACE_H) && defined(PT_GETSIGINFO)
                             if (!really_know)
                               r = ptrace(PT_GETSIGINFO, child, NULL, &sig);
 #endif
